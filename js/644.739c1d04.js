"use strict";(self["webpackChunkweek7_vue_project"]=self["webpackChunkweek7_vue_project"]||[]).push([[644],{8406:function(e,a,o){o.d(a,{Z:function(){return k}});var s=o(6252),t=o(9963);const n={class:"modal fade",id:"loginModal",tabindex:"-1","aria-labelledby":"loginModalLabel","aria-hidden":"true"},l={class:"modal-dialog"},r={class:"modal-content border-0"},i=(0,s._)("div",{class:"modal-header bg-dark text-white"},[(0,s._)("h5",{class:"modal-title",id:"loginModalLabel"},"管理後台入口")],-1),d={class:"modal-body"},c=(0,s._)("p",{class:"text-center | my-6"},"後台管理人員請輸入帳號密碼進行驗證",-1),u={id:"form"},m={class:"form-floating mb-3"},p=(0,s._)("label",{for:"username"},"Email address",-1),g={class:"form-floating mb-3"},h=(0,s._)("label",{for:"password"},"Password",-1);function b(e,a,o,b,f,v){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[(0,s._)("div",r,[i,(0,s._)("div",d,[c,(0,s._)("form",u,[(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>f.userInfo.username=e),type:"email",id:"username",class:"form-control",placeholder:"name@example.com",required:""},null,512),[[t.nr,f.userInfo.username]]),p]),(0,s._)("div",g,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>f.userInfo.password=e),type:"password",id:"password",class:"form-control",placeholder:"Password",required:""},null,512),[[t.nr,f.userInfo.password]]),h]),(0,s._)("button",{onClick:a[2]||(a[2]=(...e)=>v.loginIn&&v.loginIn(...e)),class:"btn btn-lg btn-primary w-100 mt-3",type:"button"}," 登入 ")])])])])])}var f=o(7244),v={name:"ModalLogin",data(){return{modal:"",userInfo:{username:"",password:""}}},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()},loginIn(){this.$http.post("https://vue3-course-api.hexschool.io/v2/admin/signin",this.userInfo).then((e=>{const{token:a,expired:o}=e.data;document.cookie=`myToken=${a}; expires=${new Date(o)};`,this.closeModal(),this.$router.push({name:"dashboard_Products"})})).catch((e=>{console.log(e.response);const a=e.response.data.message,o=e.response.data.error.message;this.$swal.fire({icon:"error",title:`${a}！`,text:o})}))}},mounted(){this.modal=new f.u_(document.getElementById("loginModal"))}},_=o(3744);const w=(0,_.Z)(v,[["render",b]]);var k=w},7644:function(e,a,o){o.r(a),o.d(a,{default:function(){return W}});var s=o(6252);function t(e,a,o,t,n,l){const r=(0,s.up)("BackendNavbar"),i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),n.status?((0,s.wg)(),(0,s.j4)(i,{key:0})):(0,s.kq)("",!0)],64)}const n={class:"navbar navbar-expand-lg navbar-dark bg-dark | py-4"},l={class:"container"},r=(0,s._)("i",{class:"bi bi-box-arrow-left fs-4 me-1"},null,-1),i=(0,s.Uk)(" 返回前台 "),d=(0,s._)("i",{class:"bi bi-boxes fs-4 me-1"},null,-1),c=(0,s.Uk)(" 產品列表 "),u=(0,s._)("i",{class:"bi bi-clipboard-data fs-4 me-1"},null,-1),m=(0,s.Uk)(" 訂單列表 "),p=(0,s._)("i",{class:"bi bi-ticket-perforated fs-4 me-1"},null,-1),g=(0,s.Uk)(" 優惠券管理 "),h=(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarList","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s._)("span",{class:"navbar-toggler-icon"})],-1),b={class:"collapse navbar-collapse justify-content-end",id:"navbarList"},f={class:"navbar-nav"},v=(0,s._)("i",{class:"bi bi-person-circle fs-4 text-light | me-2 me-lg-0"},null,-1),_=(0,s._)("p",{class:"d-lg-none text-light"},"後台管理人員登入",-1),w=[v,_];function k(e,a,o,t,v,_){const k=(0,s.up)("router-link"),x=(0,s.up)("ModalLogin");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",n,[(0,s._)("div",l,[(0,s.Wm)(k,{to:"/",class:"text-light me-8"},{default:(0,s.w5)((()=>[r,i])),_:1}),(0,s.Wm)(k,{to:"./products",class:"text-light me-8"},{default:(0,s.w5)((()=>[d,c])),_:1}),(0,s.Wm)(k,{to:"./orders",class:"text-light me-8"},{default:(0,s.w5)((()=>[u,m])),_:1}),(0,s.Wm)(k,{to:"./coupon",class:"text-light me-8"},{default:(0,s.w5)((()=>[p,g])),_:1}),h,(0,s._)("div",b,[(0,s._)("ul",f,[(0,s._)("li",{class:"btn nav-item d-flex align-items-center",onClick:a[0]||(a[0]=(...e)=>_.openLoginModel&&_.openLoginModel(...e)),onKeydown:a[1]||(a[1]=(...a)=>e.login&&e.login(...a))},w,32)])])])]),(0,s.Wm)(x,{ref:"loginModal"},null,512)],64)}var x=o(8406),y={name:"BackendNavbar",components:{ModalLogin:x.Z},methods:{openLoginModel(){this.$refs.loginModal.openModal()}}},M=o(3744);const $=(0,M.Z)(y,[["render",k]]);var L=$,I={components:{BackendNavbar:L},data(){return{status:!1}},methods:{checkLogin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=e,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/user/check").then((()=>{this.status=!0})).catch((e=>{console.log(e.response),this.$router.push("./")}))}},created(){this.checkLogin()}};const U=(0,M.Z)(I,[["render",t]]);var W=U}}]);
//# sourceMappingURL=644.739c1d04.js.map