{"version":3,"file":"js/475.5c117b62.js","mappings":"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","sources":["webpack://week7-vue-project/./src/views/Front/FProductsView.vue","webpack://week7-vue-project/./src/views/Front/FProductsView.vue?b5fa"],"sourcesContent":["<template>\n  <!-- 產品列表 -->\n  <section class=\"container | py-20\">\n    <h2 class=\"text-center\">來選好食</h2>\n    <hr class=\"my-6\" />\n    <!-- 品項分類按鈕 -->\n    <div class=\"row\">\n      <div v-for=\"(item, i) in Object.keys(categories)\" :key=\"i\"\n       class=\"col-4 col-sm-3 col-lg-2\">\n        <button type=\"button\"\n         class=\"btn btn-outline-blue2 fw-bold text-blue1 w-100 py-2 mb-4\"\n         :class=\"{ active: item===showCategory }\"\n         @click=\"filterCategory(item)\">\n          {{ item }}\n          <span class=\"text-blue1\">\n            {{ categories[item] ? `（${categories[item]}）` : '' }}\n          </span>\n        </button>\n      </div>\n    </div>\n    <!-- 商品列表 -->\n    <div class=\"row\">\n      <!-- 第一張卡片 -->\n      <div\n        v-for=\"item in products\"\n        :key=\"item.id\"\n        :class=\"{ 'd-none': item.category !== showCategory && showCategory !== '全部商品' }\"\n        class=\"col-12 col-sm-6 col-md-4 col-lg-3 | mb-6\"\n      >\n        <div class=\"card rounded-4 overflow-hidden shadow w-100\">\n          <div class=\"ratio ratio-4x3\">\n            <img :src=\"item.imageUrl\" class=\"w-100 h-100 img-cover\" alt='' />\n          </div>\n          <div class=\"card-body\">\n            <h4 class=\"fz-6 fz-md-5 fz-lg-6 mb-2\">\n              {{ item.title }}\n            </h4>\n            <div class=\"d-flex align-items-center justify-content-between | mb-4\">\n              <p class=\"fw-bold\">\n                好食價 <sapn class=\"fz-5 text-danger\">{{ item.price }}</sapn> 元\n              </p>\n              <p class=\"fz-4 text-muted\">\n                <s>原價 {{ item.origin_price }} 元</s>\n              </p>\n            </div>\n            <div class=\"d-flex justify-content-between\">\n              <router-link :to=\"`/product/${item.id}`\">\n                <button type=\"button\"\n                  class=\"btn btn-outline-gray d-flex align-items-center\"\n                >\n                  <i class=\"bi bi-eye-fill me-1\"></i>\n                  <span class=\"d-block d-sm-none d-lg-block\">\n                    看更多\n                  </span>\n                  <span class=\"d-none d-sm-block d-lg-none\">\n                    詳細\n                  </span>\n                </button>\n              </router-link>\n              <button\n                @click=\"addCart(item.id)\"\n                :disabled=\"item.id === is_loadingItem\"\n                type=\"button\"\n                class=\"btn btn-dark d-flex align-items-center\"\n              >\n                <div\n                  v-if=\"item.id === is_loadingItem\"\n                  class=\"spinner-border text-warning\"\n                  role=\"status\"\n                >\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <div class=\"d-flex\" v-else>\n                  <i class=\"bi bi-cart3 me-1\"></i>\n                  <span class=\"d-block d-sm-none d-lg-block\">\n                    加入購物車\n                  </span>\n                  <span class=\"d-none d-sm-block d-lg-none\">\n                    購物車\n                  </span>\n                </div>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      categories: {\n        全部商品: '',\n      },\n      showCategory: '全部商品',\n      is_loadingItem: '',\n      carts: [],\n      isLoading: false,\n    };\n  },\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/products/all`,\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          this.products.forEach((item) => {\n            if (!this.categories[item.category]) {\n              this.categories[item.category] = 1;\n            } else {\n              this.categories[item.category] += 1;\n            }\n          });\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    getCart() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/cart`,\n        )\n        .then((res) => {\n          this.carts = res.data.data;\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    addCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.is_loadingItem = id;\n\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/cart`,\n          { data },\n        )\n        .then((res) => {\n          console.log(res.data);\n          const name = res.data.data.product.title;\n          const msg = res.data.message;\n          // SweetAlert：產品成功加入購物車\n          this.$swal.fire({\n            icon: 'success',\n            title: '成功！',\n            text: `${name} ${msg}`,\n          });\n          this.getCart();\n          this.is_loadingItem = '';\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    filterCategory(category) {\n      this.showCategory = category;\n    },\n    showLoading() {\n      const loader = this.$loading.show();\n      setTimeout(() => {\n        loader.hide();\n      }, 500);\n      // this.isLoading = true;\n      // setTimeout(() => {\n      //   this.isLoading = false;\n      // }, 1000);\n    },\n  },\n  mounted() {\n    this.showLoading();\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./FProductsView.vue?vue&type=template&id=d5a59194\"\nimport script from \"./FProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./FProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\F2E\\\\Hex 六角學院\\\\HEX-六角2022 Vue 直播班\\\\Vue 直播班主線任務\\\\Hex_Vue_week7\\\\week7-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","type","role","_hoisted_22","_hoisted_25","_hoisted_26","_hoisted_27","_createElementBlock","_hoisted_2","_hoisted_3","_Fragment","_renderList","Object","keys","$data","item","i","key","active","onClick","$options","_toDisplayString","id","category","src","imageUrl","alt","title","_createVNode","_component_sapn","price","origin_price","_component_router_link","to","_hoisted_19","disabled","_hoisted_23","_hoisted_28","data","products","categories","全部商品","showCategory","is_loadingItem","carts","isLoading","methods","getProducts","this","$http","get","then","res","forEach","catch","err","console","log","response","getCart","addCart","qty","product_id","post","name","product","msg","message","$swal","fire","icon","text","filterCategory","showLoading","loader","$loading","show","setTimeout","hide","mounted","__exports__","render"],"sourceRoot":""}