"use strict";(self["webpackChunkweek7_vue_project"]=self["webpackChunkweek7_vue_project"]||[]).push([[327],{8406:function(t,e,a){a.d(e,{Z:function(){return x}});var s=a(6252),n=a(9963);const l={class:"modal fade",id:"loginModal",tabindex:"-1","aria-labelledby":"loginModalLabel","aria-hidden":"true"},o={class:"modal-dialog"},r={class:"modal-content border-0"},i=(0,s._)("div",{class:"modal-header bg-dark text-white"},[(0,s._)("h5",{class:"modal-title",id:"loginModalLabel"},"管理後台入口")],-1),c={class:"modal-body"},d=(0,s._)("p",{class:"text-center | my-6"},"後台管理人員請輸入帳號密碼進行驗證",-1),u={id:"form"},p={class:"form-floating mb-3"},h=(0,s._)("label",{for:"username"},"Email address",-1),m={class:"form-floating mb-3"},g=(0,s._)("label",{for:"password"},"Password",-1);function f(t,e,a,f,b,v){return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",o,[(0,s._)("div",r,[i,(0,s._)("div",c,[d,(0,s._)("form",u,[(0,s._)("div",p,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>b.userInfo.username=t),type:"email",id:"username",class:"form-control",placeholder:"name@example.com",required:""},null,512),[[n.nr,b.userInfo.username]]),h]),(0,s._)("div",m,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>b.userInfo.password=t),type:"password",id:"password",class:"form-control",placeholder:"Password",required:""},null,512),[[n.nr,b.userInfo.password]]),g]),(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>v.loginIn&&v.loginIn(...t)),class:"btn btn-lg btn-primary w-100 mt-3",type:"button"}," 登入 ")])])])])])}var b=a(7244),v={name:"ModalLogin",data(){return{modal:"",userInfo:{username:"",password:""}}},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()},loginIn(){this.$http.post("https://vue3-course-api.hexschool.io/v2/admin/signin",this.userInfo).then((t=>{const{token:e,expired:a}=t.data;document.cookie=`myToken=${e}; expires=${new Date(a)};`,this.closeModal(),this.$router.push({name:"dashboard_Products"})})).catch((t=>{console.log(t.response);const e=t.response.data.message,a=t.response.data.error.message;this.$swal.fire({icon:"error",title:`${e}！`,text:a})}))}},mounted(){this.modal=new b.u_(document.getElementById("loginModal"))}},_=a(3744);const w=(0,_.Z)(v,[["render",f]]);var x=w},6211:function(t,e,a){a.r(e),a.d(e,{default:function(){return Wt}});var s=a(6252);function n(t,e,a,n,l,o){const r=(0,s.up)("FrontNavbar"),i=(0,s.up)("router-view"),c=(0,s.up)("FrontFooter");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s._)("div",null,[(0,s.Wm)(i,{id:"mainLayout"})]),(0,s.Wm)(c)],64)}const l={class:"navbar navbar-expand-lg navbar-light fixed-top bg-cream3 shadow-sm opacity-75 | py-5 py-md-4 py-lg-2"},o={class:"container"},r=(0,s._)("h1",{class:"text-green1 fz-9"},[(0,s._)("strong",null,"好食遞")],-1),i=(0,s._)("span",{class:"text-gray fz-3"},"HEALTHY DIET",-1),c=(0,s._)("span",{class:"material-icons me-2"}," restaurant_menu ",-1),d=(0,s._)("h5",null,[(0,s._)("strong",null,"來選好食")],-1),u=(0,s._)("i",{class:"bi bi-lightbulb-fill me-2"},null,-1),p=(0,s._)("h5",null,[(0,s._)("strong",null,"食前好思")],-1),h=(0,s._)("span",{class:"material-icons me-2"}," local_shipping ",-1),m=(0,s._)("h5",null,[(0,s._)("strong",null,"如何好遞")],-1),g=(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarList","aria-controls":"navbarList","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s._)("span",{class:"navbar-toggler-icon"})],-1),f={class:"collapse navbar-collapse justify-content-end",id:"navbarList"},b={class:"navbar-nav py-6 py-md-5 py-lg-0"},v={class:"nav-item d-flex align-items-center | my-4 me-4 d-lg-none"},_=(0,s._)("span",{class:"material-icons me-2"}," restaurant_menu ",-1),w=(0,s._)("h5",null,[(0,s._)("strong",null,"來選好食")],-1),x={class:"nav-item d-flex align-items-center | my-4 me-4 d-lg-none"},y=(0,s._)("i",{class:"bi bi-lightbulb-fill fs-5 text-dark | me-2 me-lg-0"},null,-1),k=(0,s._)("h5",null,[(0,s._)("strong",null,"食前好思")],-1),C={class:"nav-item d-flex align-items-center | my-4 me-4 d-lg-none"},$=(0,s._)("span",{class:"material-icons me-2"}," local_shipping ",-1),M=(0,s._)("h5",null,[(0,s._)("strong",null,"如何好遞")],-1),L=(0,s._)("i",{class:"bi bi-cart3 fz-5 fz-md-6 text-dark | me-2 me-lg-0"},null,-1),z=(0,s._)("h5",{class:"d-lg-none text-dark"},[(0,s._)("strong",null,"購物車")],-1),F=[L,z],I=(0,s._)("i",{class:"bi bi-person-circle fz-5 fz-md-6 text-dark | me-2 me-lg-0"},null,-1),B=(0,s._)("h5",{class:"d-lg-none text-dark"},[(0,s._)("strong",null,"後台管理人員登入")],-1),D=[I,B];function T(t,e,a,n,L,z){const I=(0,s.up)("router-link"),B=(0,s.up)("CanvasCart"),T=(0,s.up)("ModalLogin");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",l,[(0,s._)("div",o,[(0,s.Wm)(I,{to:"/",class:"text-center me-10"},{default:(0,s.w5)((()=>[r,i])),_:1}),(0,s.Wm)(I,{to:"/products",class:"d-none d-lg-flex text-dark me-8 | hvr-float-shadow"},{default:(0,s.w5)((()=>[c,d])),_:1}),(0,s.Wm)(I,{to:"/dietInfo",class:"d-none d-lg-flex text-dark me-8 | hvr-float-shadow"},{default:(0,s.w5)((()=>[u,p])),_:1}),(0,s.Wm)(I,{to:"/aboutShipping",class:"d-none d-lg-flex text-dark me-8 | hvr-float-shadow"},{default:(0,s.w5)((()=>[h,m])),_:1}),g,(0,s._)("div",f,[(0,s._)("ul",b,[(0,s._)("li",v,[(0,s.Wm)(I,{to:"/products",class:"d-flex text-dark nav-link"},{default:(0,s.w5)((()=>[_,w])),_:1})]),(0,s._)("li",x,[(0,s.Wm)(I,{to:"/dietInfo",class:"d-flex text-dark nav-link"},{default:(0,s.w5)((()=>[y,k])),_:1})]),(0,s._)("li",C,[(0,s.Wm)(I,{to:"/aboutShipping",class:"d-flex text-dark nav-link"},{default:(0,s.w5)((()=>[$,M])),_:1})]),(0,s._)("li",{class:"nav-item d-flex align-items-center | my-4 me-4",onClick:e[0]||(e[0]=(...t)=>z.openCartCanvas&&z.openCartCanvas(...t)),onKeydown:e[1]||(e[1]=(...e)=>t.canvas&&t.canvas(...e))},F,32),(0,s._)("li",{class:"nav-item d-flex align-items-center | my-4 me-4",onClick:e[2]||(e[2]=(...t)=>z.openLoginModel&&z.openLoginModel(...t)),onKeydown:e[3]||(e[3]=(...e)=>t.login&&t.login(...e))},D,32)])])])]),(0,s.Wm)(B,{ref:"cartCanvas"},null,512),(0,s.Wm)(T,{ref:"loginModal"},null,512)],64)}var W=a(3577);const U={ref:"cart_canvas",class:"offcanvas offcanvas-end bg-dark",tabindex:"-1","aria-labelledby":"cartLabel"},q=(0,s._)("div",{class:"offcanvas-header ps-8"},[(0,s._)("h2",{id:"cartLabel",class:"text-white py-2"},"購物車列表")],-1),E={class:"offcanvas-body fashion-scrollbar ps-8 pt-1 h-100"},H={key:0,class:"text-white mb-4"},N=(0,s.Uk)(" 您所選購的商品"),Z=(0,s._)("span",{class:"text-green2"},"總熱量",-1),j={key:1,class:"text-white mb-4"},Y=(0,s.Uk)(" 共含"),A=(0,s._)("span",{class:"text-warning"},"碳水化合物",-1),K=(0,s._)("span",{class:"text-warning"},"粗脂肪",-1),P=(0,s._)("span",{class:"text-warning"},"粗蛋白質",-1),R=["onClick"],S={class:"row g-0 align-items-center"},V={class:"col-3"},G=["src"],J={class:"col-9 ps-4"},O={class:"row"},Q={class:"col-7 d-flex flex-column align-items-center justify-content-center"},X={class:"card-title mb-4"},tt={class:"card-text"},et=(0,s.Uk)(" 單價 NT "),at={key:0,class:"text-gray"},st={class:"col-5 d-flex align-items-end"},nt={class:"btn-group d-flex justify-content-around align-items-center",role:"group","aria-label":"Basic"},lt=["onClick","disabled"],ot=["value"],rt=["onClick"],it={class:"offcanvas-footer d-flex justify-content-between align-items-center py-6 px-8"},ct={class:"d-flex ai-c"},dt=(0,s._)("p",{class:"h5 text-white me-24"},"小計",-1),ut={class:"h5 text-white"},pt={class:"d-flex ai-c"},ht=["disabled"],mt=["disabled"];function gt(t,e,a,n,l,o){const r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",U,[q,(0,s._)("div",E,[l.is_cart?((0,s.wg)(),(0,s.iD)("h6",H,[N,Z,(0,s.Uk)("："+(0,W.zw)(l.calorie)+" kcal(仟卡) ",1)])):(0,s.kq)("",!0),l.is_cart?((0,s.wg)(),(0,s.iD)("h6",j,[Y,A,(0,s.Uk)("總量 "+(0,W.zw)(l.carbohydrate)+" g、 ",1),K,(0,s.Uk)("總量 "+(0,W.zw)(l.protein)+" g、 ",1),P,(0,s.Uk)("總量 "+(0,W.zw)(l.crudeFat)+" g ",1)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.carts.carts,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"card rounded-2 py-6 px-4 mb-3 position-relative"},[(0,s._)("button",{onClick:e=>o.delCart(t.id,t.product.title),class:"btn-close position-absolute top-0 end-0 m-2",type:"button","aria-label":"Close"},null,8,R),(0,s._)("div",S,[(0,s._)("div",V,[(0,s._)("img",{class:"img-cover w-100 h-100",src:t.product.imageUrl,alt:"..."},null,8,G)]),(0,s._)("div",J,[(0,s._)("div",O,[(0,s._)("div",Q,[(0,s._)("h5",X,(0,W.zw)(t.product.title),1),(0,s._)("p",tt,[et,t.product.origin_price!==t.product.price?((0,s.wg)(),(0,s.iD)("span",at,[(0,s._)("s",null,(0,W.zw)(t.product.origin_price),1)])):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,W.zw)(t.product.price)+" 元 ",1)])]),(0,s._)("div",st,[(0,s._)("div",nt,[(0,s._)("button",{onClick:e=>o.editCart(t.id,t.qty-1),disabled:t.qty-1===0,type:"button",class:"btn btn-warning fw-bold"}," － ",8,lt),(0,s._)("input",{value:t.qty,type:"text",class:"form-control-plaintext p-0 border-0 fw-bold text-black text-center"},null,8,ot),(0,s._)("button",{onClick:e=>o.editCart(t.id,t.qty+1),type:"button",class:"btn btn-warning fw-bold"}," ＋ ",8,rt)])])])])])])))),128))]),(0,s._)("div",it,[(0,s._)("div",ct,[dt,(0,s._)("span",ut,"NT$ "+(0,W.zw)(l.carts.total),1)]),(0,s._)("div",pt,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>o.delCart(null)),disabled:0===l.carts.carts?.length,class:"btn btn-outline-danger px-4 py-2 me-6"}," 清空購物車 ",8,ht),(0,s.Wm)(r,{to:{name:"checkoutCart"}},{default:(0,s.w5)((()=>[(0,s._)("button",{type:"button",class:"btn btn-danger px-4 py-2",onClick:e[1]||(e[1]=t=>o.closeCanvas()),disabled:0===l.carts.carts?.length}," 前往結帳 ",8,mt)])),_:1})])])],512)}var ft=a(7244),bt={name:"CanvasCart",data(){return{canvas:"",carts:[],is_cart:0,calorie:0,carbohydrate:0,protein:0,crudeFat:0}},methods:{calcNutrients(){this.calorie=0,this.carbohydrate=0,this.protein=0,this.crudeFat=0,this.carts.carts.forEach((t=>{this.calorie+=Math.floor(t.product.calorie*(t.product.number/100)),this.carbohydrate+=Math.floor(t.product.carbohydrate*(t.product.number/100)),this.protein+=Math.floor(t.product.protein*(t.product.number/100)),this.crudeFat+=Math.floor(t.product.crudeFat*(t.product.number/100))}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((t=>{this.carts=t.data.data,this.is_cart=this.carts.carts.length,this.calcNutrients()})).catch((t=>{console.log(t.response)}))},openCanvas(){this.getCart(),this.canvas.show()},closeCanvas(){this.canvas.hide()},editCart(t,e){const a={product_id:t,qty:e};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${t}`,{data:a}).then((()=>{this.getCart()})).catch((t=>{console.log(t.response)}))},delCart(t,e){let a="";t?(a=`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${t}`,this.$swal.fire({title:`確定要將${e}刪除嗎？`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"確定刪除！",cancelButtonText:"取消"}).then((t=>{t.isConfirmed&&this.$http.delete(a).then((()=>{this.$swal.fire({icon:"success",title:"成功！",text:`您已將${e}刪除了！`}),this.getCart()})).catch((t=>{console.log(t.response),this.$swal.fire({icon:"error",title:"刪除失敗！",text:"請再試一次"})}))}))):(a="https://vue3-course-api.hexschool.io/v2/api/sylviah/carts",this.$swal.fire({title:"確定要清空購物車嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"確定刪除！",cancelButtonText:"取消"}).then((t=>{t.isConfirmed&&this.$http.delete(a).then((()=>{this.$swal.fire({icon:"success",title:"成功！",text:"您已將購物車清空了！"}),this.getCart()})).catch((t=>{console.log(t.response),this.$swal.fire({icon:"error",title:"刪除失敗！",text:"請再試一次"})}))})))}},mounted(){this.getCart(),this.canvas=new ft.TB(this.$refs.cart_canvas)}},vt=a(3744);const _t=(0,vt.Z)(bt,[["render",gt]]);var wt=_t,xt=a(8406),yt={name:"FrontNavbar",components:{CanvasCart:wt,ModalLogin:xt.Z},methods:{openLoginModel(){this.$refs.loginModal.openModal()},openCartCanvas(){this.$refs.cartCanvas.openCanvas()}}};const kt=(0,vt.Z)(yt,[["render",T]]);var Ct=kt;const $t={class:"bg-dark position-relative"},Mt=(0,s._)("div",{class:""},[(0,s._)("p",{class:"h6 text-white text-center position-absolute top-0 start-0 bottom-0 end-0 m-auto"}," HEALTHY DIET © 2022. All Rights Reserved. ")],-1),Lt=[Mt];function zt(t,e,a,n,l,o){return(0,s.wg)(),(0,s.iD)("footer",$t,Lt)}var Ft={name:"FrontFooter"};const It=(0,vt.Z)(Ft,[["render",zt]]);var Bt=It,Dt={components:{FrontNavbar:Ct,FrontFooter:Bt}};const Tt=(0,vt.Z)(Dt,[["render",n]]);var Wt=Tt}}]);
//# sourceMappingURL=327.d0613970.js.map