{"version":3,"file":"js/796.a84f2af7.js","mappings":"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","sources":["webpack://week7-vue-project/./src/views/Dashboard/BCouponView.vue","webpack://week7-vue-project/./src/components/ModalCoupon.vue","webpack://week7-vue-project/./src/components/ModalCoupon.vue?6bde","webpack://week7-vue-project/./src/views/Dashboard/BCouponView.vue?497d"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row py-3\">\n      <div class=\"col-12\">\n        <div class=\"d-flex justify-content-between mx-6 my-8\">\n          <h2>優惠券列表</h2>\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-dark\"\n            @click=\"openCouponModal(1, {});\"\n          >\n            新增優惠券\n          </button>\n        </div>\n        <table class=\"table table-hover mt-4 text-center\">\n          <thead>\n            <tr>\n              <th>優惠券主題</th>\n              <th>優惠碼</th>\n              <th>折扣百分比</th>\n              <th>優惠到期日</th>\n              <th>是否啟用</th>\n              <th>編輯</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in coupons\" :key=\"item.code\">\n              <td>\n                  {{ item.title }}\n              </td>\n              <td>\n                {{ item.code }}\n              </td>\n              <td>\n                {{ item.percent }} %\n              </td>\n              <td>\n                {{ $filters.transferTime(item.due_date) }}\n              </td>\n              <td>\n                <span\n                  v-if=\"item.is_enabled\"\n                  @click=\"changeStatus(item.id)\"\n                  @keydown=\"enter\"\n                  class=\"btn btn-success py-2 px-2 rounded\"\n                >\n                  啟用\n                </span>\n                <span\n                  v-else\n                  @click=\"changeStatus(item.id)\"\n                  @keydown=\"enter\"\n                  class=\"btn btn-dark py-2 px-2 rounded\"\n                >\n                  未啟用\n                </span>\n              </td>\n              <td>\n                <div class=\"btn-group\" role=\"group\">\n                  <!-- 編輯優惠券內容 -->\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-warning\"\n                    @click=\"openCouponModal(0, item);\"\n                  >\n                    <i class=\"bi bi-pencil-square\"></i>\n                  </button>\n                  <!-- 刪除優惠券 -->\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-danger\"\n                    @click=\"delCoupon(item)\"\n                  >\n                    <i class=\"bi bi-trash\"></i>\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <p>\n          目前有 <span>{{ coupons.length }}</span> 種優惠券\n        </p>\n\n        <br />\n\n        <!-- 分頁元件 -->\n        <PaginationProducts\n          :pagination = \"pagination\"\n          class = \"d-flex justify-content-center\"\n          @get-coupons=\"getCoupons\"\n        ></PaginationProducts>\n\n        <!-- Modal 編輯產品 -->\n        <ModalCoupon\n         :coupon=\"tempItemInfo\"\n         :is_addNewCoupon=\"is_addNewCoupon\"\n          ref=\"editCouponModal\"\n          @edit-coupon = \"editCoupon\"\n        >\n        </ModalCoupon>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PaginationProducts from '@/components/PaginationProducts.vue';\nimport ModalCoupon from '@/components/ModalCoupon.vue';\n\nexport default {\n  data() {\n    return {\n      coupons: [],\n      pagination: {},\n      tempItemInfo: {},\n      // 是否新增優惠券，預設狀態:'0-否'\n      is_addNewCoupon: 0,\n    };\n  },\n  components: {\n    ModalCoupon,\n    PaginationProducts,\n  },\n  methods: {\n    getCoupons() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/admin/coupons`,\n        )\n        .then((res) => {\n          console.log(res.data);\n          this.coupons = res.data.coupons;\n          this.pagination = res.data.pagination;\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    changeStatus(id) {\n      this.coupons.forEach((el) => {\n        const item = el;\n        if (item.id === id) {\n          // item.is_enabled ? (item.is_enabled = 0) : (item.is_enabled = 1);\n          if (item.is_enabled) {\n            item.is_enabled = 0;\n          } else {\n            item.is_enabled = 1;\n          }\n          this.is_addNewCoupon = 0;\n          this.editCoupon(item, id);\n        }\n      });\n    },\n    editCoupon(item, id) {\n      if (item) {\n        console.log(item);\n        this.tempItemInfo = item;\n      }\n      const dataObj = {\n        data: this.tempItemInfo,\n      };\n      let httpStatus = '';\n      let url = '';\n\n      if (this.is_addNewCoupon) {\n        httpStatus = 'post';\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/admin/coupon`;\n      } else {\n        httpStatus = 'put';\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/admin/coupon/${\n          this.tempItemInfo.id || id\n        }`;\n      }\n      this.$http[httpStatus](url, dataObj)\n        .then(() => {\n          if (httpStatus === 'post') {\n            // 成功新增優惠券，sweetalert 跳出提示訊息視窗\n            this.$swal.fire({\n              icon: 'success',\n              title: '成功！',\n              text: `成功新增 ${this.tempItemInfo.title}`,\n            });\n          } else {\n            // 成功更新優惠券，sweetalert 跳出提示訊息視窗\n            this.$swal.fire({\n              icon: 'success',\n              title: '成功！',\n              text: `已更新 ${this.tempItemInfo.title} 的資訊`,\n            });\n          }\n          this.getCoupons(this.pagination.current_page);\n        })\n        .catch((err) => {\n          console.log(err.response);\n          const errMSG = err.response.data.message;\n          let msg = '';\n          errMSG.forEach((el) => {\n            msg += `${el}。\\n`;\n          });\n          // 更新失敗，sweetalert 跳出提示訊息視窗\n          this.$swal.fire({\n            icon: 'error',\n            title: '失敗！請重新輸入資訊。',\n            text: msg,\n          });\n        });\n    },\n    delCoupon(item) {\n      let url;\n      let msgTitle;\n      let msgText;\n\n      if (item) {\n        this.tempItemInfo = item;\n        const dataID = this.tempItemInfo.id;\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/admin/coupon/${dataID}`;\n        msgTitle = '優惠券';\n        msgText = `優惠券刪除後將無法恢復。優惠券編號：${this.tempItemInfo.id}。`;\n      } else {\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/admin/coupon`;\n        msgTitle = '所有優惠券';\n        msgText = '優惠券刪除後將無法恢復。';\n      }\n      this.$swal\n        .fire({\n          title: `確定要刪除 ${msgTitle} 嗎？`,\n          text: msgText,\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#d33',\n          cancelButtonColor: '#3085d6',\n          confirmButtonText: '確定刪除！',\n          cancelButtonText: '取消',\n        })\n        .then((result) => {\n          if (result.isConfirmed) {\n            this.$http\n              .delete(url)\n              .then(() => {\n                // 成功刪除產品，sweetalert 跳出提示訊息視窗\n                this.$swal.fire({\n                  icon: 'success',\n                  title: '成功！',\n                  text: `已刪除 ${msgTitle}`,\n                });\n                this.getCoupons(this.pagination.current_page);\n              })\n              .catch(() => {\n                // 刪除失敗，sweetalert 跳出提示訊息視窗\n                this.$swal.fire({\n                  icon: 'error',\n                  title: '刪除失敗！',\n                  text: '請再試一次',\n                });\n              });\n          }\n        });\n    },\n    openCouponModal(isNew, item) {\n      this.is_addNewCoupon = isNew;\n      this.tempItemInfo = item;\n      // 開啟 modal 元件\n      this.$refs.editCouponModal.openModal(item);\n    },\n  },\n  mounted() {\n    this.getCoupons();\n  },\n};\n</script>\n","<template>\n  <div\n    id=\"couponModal\"\n    class=\"modal fade\"\n    tabindex=\"-1\"\n    aria-labelledby=\"couponModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\">\n            <span>新增優惠券</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"row\">\n                <div class=\"col-10 offset-1\">\n                  <div class=\"bg-secondary text-light text-center rounded p-4 mb-4\">\n                    <div class=\"d-flex justify-content-between align-items-center mb-3\">\n                      <h5 class=\"mb-3 me-3\">優惠券代碼亂數產生器</h5>\n                      <button type=\"button\" class=\"btn btn-dark mb-3\" @click=\"genRandom\">\n                        產生亂數代碼\n                      </button>\n                    </div>\n                    <div class=\"input-group mb-3\">\n                      <input\n                        type=\"text\"\n                        class=\"form-control\"\n                        id=\"textRandom\"\n                        v-model=\"textRandom\"\n                        aria-label=\"亂數代碼回傳結果\"\n                        placeholder=\"亂數代碼回傳結果\"\n                      />\n                      <button\n                        type=\"button\"\n                        class=\"input-group-text\"\n                        id=\"btn_copyLink\"\n                        @click=\"copyText()\"\n                        data-clipboard-target=\"#textRandom\"\n                      >\n                        <!-- 複製位址 -->\n                        <span class=\"material-icons\"> content_copy </span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-12\">\n                  <label for=\"title\" class=\"form-label w-100 mb-4\">\n                    優惠券主題名稱\n                    <input\n                      id=\"title\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"請輸入優惠券名稱\"\n                      v-model=\"tempItem.title\"\n                      required\n                    />\n                  </label>\n                  <label for=\"code\" class=\"form-label w-100 mb-4\">\n                    優惠券代碼\n                    <input\n                      id=\"code\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"請輸入優惠券代碼\"\n                      v-model=\"tempItem.code\"\n                      required\n                    />\n                  </label>\n                  <label for=\"percent\" class=\"form-label w-100 mb-4\">\n                    優惠折扣百分比\n                    <input\n                      id=\"percent\"\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"100\"\n                      class=\"form-control\"\n                      placeholder=\"請輸入 0 ~ 100 %\"\n                      v-model=\"tempItem.percent\"\n                      required\n                    />\n                  </label>\n                  <label for=\"due_date\" class=\"form-label w-100 mb-4\">\n                    優惠到期日\n                    <input\n                      id=\"due_date\"\n                      type=\"datetime-local\"\n                      class=\"form-control\"\n                      v-model=\"tempDate\"\n                      required\n                    />\n                  </label>\n                  <label for=\"check_enabled\" class=\"form-check-label w-100 mb-4\">\n                    <input id=\"check_enabled\" type=\"checkbox\"\n                      class=\"form-check-input me-2\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                      v-model=\"tempItem.is_enabled\"\n                    />\n                    <span v-if=\"tempItem.is_enabled\" class=\"text-success\">\n                      <b>已啟用</b>\n                    </span>\n                    <span v-else class=\"text-danger\">未啟用</span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button\n            v-if=\"is_addNewCoupon\"\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"closeModal();$emit('editCoupon', tempItem);\"\n          >\n            新增優惠券\n          </button>\n          <button\n            v-else\n            type=\"button\"\n            class=\"btn btn-success\"\n            @click=\"closeModal();$emit('editCoupon', tempItem);\"\n          >\n            修改優惠券內容\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap';\nimport Clipboard from 'clipboard';\n\nexport default {\n  name: 'ModalCoupon',\n  props: ['coupon', 'is_addNewCoupon'],\n  watch: {\n    coupon() {\n      this.tempItem = JSON.parse(JSON.stringify(this.coupon));\n      if (!this.tempItem.is_enabled) {\n        this.tempItem.is_enabled = 0;\n      }\n      this.tempDate = this.$filters.transferToDate(this.tempItem.due_date);\n    },\n    tempDate() {\n      // 將時間格式轉回數字格式\n      this.tempItem.due_date = +new Date(this.tempDate) / 1000;\n    },\n  },\n  data() {\n    return {\n      modal: '',\n      tempItem: {\n        is_enabled: 0,\n      },\n      tempDate: '',\n      textRandom: '',\n    };\n  },\n  methods: {\n    openModal() {\n      this.modal.show();\n    },\n    closeModal() {\n      this.modal.hide();\n    },\n    genRandom() {\n      const number = '0123456789';\n      const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n      const symbol = '#$*_';\n      const str = (number + letters + symbol).split('');\n      let result = '';\n      for (let i = 0; i < 10; i += 1) {\n        result += str[Math.floor(Math.random() * str.length)];\n      }\n      this.textRandom = result;\n    },\n    copyText() {\n      const clipboard = new Clipboard('#btn_copyLink');\n\n      clipboard.on('success', (e) => {\n        console.info('Action:', e.action);\n        console.info('Text:', e.text);\n        console.info('Trigger:', e.trigger);\n        // 取消選取\n        e.clearSelection();\n      });\n\n      clipboard.on('error', (e) => {\n        console.error('Action:', e.action);\n        console.error('Trigger:', e.trigger);\n      });\n    },\n    organizeData() {\n      this.tempItem = this.coupon;\n      if (!this.tempItem.is_enabled) {\n        this.tempItem.is_enabled = 0;\n      }\n      if (this.tempItem.due_date) {\n        this.tempDate = this.$filters.transferToDate(this.tempItem.due_date);\n      }\n    },\n  },\n  mounted() {\n    // 建立 modal 實體\n    this.modal = new Modal(document.getElementById('couponModal'));\n    // this.organizeData();\n  },\n};\n</script>\n","import { render } from \"./ModalCoupon.vue?vue&type=template&id=627ad2fb\"\nimport script from \"./ModalCoupon.vue?vue&type=script&lang=js\"\nexport * from \"./ModalCoupon.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\F2E\\\\Hex 六角學院\\\\HEX-六角2022 Vue 直播班\\\\Vue 直播班主線任務\\\\Hex_Vue_week7\\\\week7-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BCouponView.vue?vue&type=template&id=4c3911cd\"\nimport script from \"./BCouponView.vue?vue&type=script&lang=js\"\nexport * from \"./BCouponView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\F2E\\\\Hex 六角學院\\\\HEX-六角2022 Vue 直播班\\\\Vue 直播班主線任務\\\\Hex_Vue_week7\\\\week7-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","role","_hoisted_12","_hoisted_15","_createElementBlock","_hoisted_5","type","onClick","$options","_hoisted_7","_Fragment","_renderList","$data","item","key","code","_toDisplayString","title","percent","_ctx","transferTime","due_date","is_enabled","id","onKeydown","_hoisted_8","_hoisted_9","length","_hoisted_19","_createVNode","_component_PaginationProducts","pagination","onGetCoupons","_component_ModalCoupon","coupon","is_addNewCoupon","ref","onEditCoupon","tabindex","_hoisted_14","for","_hoisted_27","_hoisted_4","$event","placeholder","required","min","max","_hoisted_28","_hoisted_31","$props","name","props","watch","this","tempItem","JSON","parse","stringify","tempDate","$filters","transferToDate","Date","data","modal","textRandom","methods","openModal","show","closeModal","hide","genRandom","number","letters","symbol","str","split","result","i","Math","floor","random","copyText","clipboard","Clipboard","on","e","console","info","action","text","trigger","clearSelection","error","organizeData","mounted","Modal","document","getElementById","__exports__","coupons","tempItemInfo","components","ModalCoupon","PaginationProducts","getCoupons","$http","get","then","res","log","catch","err","response","changeStatus","forEach","el","editCoupon","dataObj","httpStatus","url","$swal","fire","icon","current_page","errMSG","message","msg","delCoupon","msgTitle","msgText","dataID","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","isConfirmed","delete","openCouponModal","isNew","$refs","editCouponModal","render"],"sourceRoot":""}