"use strict";(self["webpackChunkweek7_vue_project"]=self["webpackChunkweek7_vue_project"]||[]).push([[419],{3419:function(t,e,l){l.r(e),l.d(e,{default:function(){return O}});var s=l(6252),o=l(3577);const i={class:"container py-18"},c=(0,s.uE)('<div class="row mb-6"><div class="col-12 col-lg-7"><div class="row g-0 | timeline"><div class="col-3"><div class="timeline-pointer"><h6 class="fw-bold mt-5">確認訂單</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">填寫訂購資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">填寫付款資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">完成訂購</h6></div></div></div></div></div>',1),a={class:"row flex-column-reverse flex-md-row"},n={class:"col-12 col-lg-7"},d={class:"table table-hover"},r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",width:"20%"}),(0,s._)("th",{scope:"col",class:"text-center"},"品名"),(0,s._)("th",{scope:"col",width:"10%",class:"text-center"},"單價"),(0,s._)("th",{scope:"col",width:"20%",class:"text-center"},"數量"),(0,s._)("th",{scope:"col",width:"8%",class:"text-end"},"刪除")])],-1),h=["src","alt"],u={class:"fw-bold me-6"},p={class:"btn-group d-flex justify-content-between align-items-center",role:"group","aria-label":"Basic"},v=["onClick","disabled"],b=["for"],m=["id","value"],w=["onClick"],_={class:"text-end"},f=["onClick"],g={class:"col-12 offset-lg-1 col-lg-4 | mb-16 mb-md-0"},x={class:"mb-10"},y={class:"bg-light p-5"},C={class:"d-flex justify-content-between"},$=(0,s._)("p",null,"小計",-1),k={class:"row d-flex justify-content-end | my-8 my-md-4"},B={class:"col-6"},T=(0,s._)("button",{class:"btn btn-outline-primary w-100"}," 返回 ",-1),j={class:"col-6"},q=["disabled"];function D(t,e,l,D,z,N){const L=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",i,[c,(0,s._)("div",a,[(0,s._)("div",n,[(0,s._)("table",d,[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.carts.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"align-middle"},[(0,s._)("td",null,[(0,s._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"img-cover w-100 h-100"},null,8,h)]),(0,s._)("td",null,[(0,s._)("p",null,(0,o.zw)(t.product.title),1)]),(0,s._)("td",null,[(0,s._)("p",u,"NT$"+(0,o.zw)(t.product.price),1)]),(0,s._)("td",null,[(0,s._)("div",p,[(0,s._)("button",{onClick:e=>N.editCart(t.id,t.qty-1),disabled:t.qty-1===0,type:"button",class:"btn btn-warning fw-bold d-none d-md-block"}," － ",8,v),(0,s._)("label",{for:t.id},[(0,s._)("input",{id:t.id,value:t.qty,type:"text",class:"form-control-plaintext p-0 border-0 fw-bold text-black text-center"},null,8,m)],8,b),(0,s._)("button",{onClick:e=>N.editCart(t.id,t.qty+1),type:"button",class:"btn btn-warning fw-bold d-none d-md-block"}," ＋ ",8,w)])]),(0,s._)("td",_,[(0,s._)("button",{onClick:e=>N.delCart(t.id,t.product.title),class:"btn-close",type:"button","aria-label":"Close"},null,8,f)])])))),128))])])]),(0,s._)("div",g,[(0,s._)("div",x,[(0,s._)("div",y,[(0,s._)("div",C,[$,(0,s._)("p",null,"NT$ "+(0,o.zw)(z.carts.total)+" 元",1)])]),(0,s._)("div",k,[(0,s._)("div",B,[(0,s.Wm)(L,{to:{name:"products"}},{default:(0,s.w5)((()=>[T])),_:1})]),(0,s._)("div",j,[(0,s.Wm)(L,{to:{name:"checkoutOrder"}},{default:(0,s.w5)((()=>[(0,s._)("button",{type:"button",disabled:0===z.carts.carts?.length,class:"btn btn-danger w-100"}," 下一步 ",8,q)])),_:1})])])])])])])}var z={data(){return{carts:[],formData:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((t=>{this.carts=t.data.data})).catch((t=>{console.log(t.response)}))},editCart(t,e){const l={product_id:t,qty:e};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${t}`,{data:l}).then((t=>{console.log(t.data),this.getCart()})).catch((t=>{console.log(t.response)}))},delCart(t,e){const l=`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${t}`;this.$swal.fire({title:`確定要將${e}刪除嗎？`,text:"商品刪除後將無法恢復。",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"確定刪除！",cancelButtonText:"取消"}).then((t=>{t.isConfirmed&&this.$http.delete(l).then((()=>{this.$swal.fire({icon:"success",title:"成功！",text:`您已將${e}刪除了！`}),this.getCart()})).catch((()=>{this.$swal.fire({icon:"error",title:"失敗！",text:"請再試一次"})}))}))},submitOrder(){const t=this.formData;this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sylviah/order",{data:t}).then((t=>{console.log(t.data),this.$refs.form.resetForm(),this.$swal.fire("成功！",`已送出訂單！總金額 NT$ ${t.data.total} 元`,{icon:"success"}).then((t=>{t&&this.$router.push("/")}))})).catch((t=>{console.log(t.response),this.$swal.fire("失敗！","送出訂單失敗，請再試一次！",{icon:"error"})}))},showLoading(){const t=this.$loading.show();setTimeout((()=>{t.hide()}),500)}},mounted(){this.getCart(),this.showLoading()}},N=l(3744);const L=(0,N.Z)(z,[["render",D]]);var O=L}}]);
//# sourceMappingURL=419.1a1e7f79.js.map