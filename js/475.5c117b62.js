"use strict";(self["webpackChunkweek7_vue_project"]=self["webpackChunkweek7_vue_project"]||[]).push([[475],{475:function(t,s,e){e.r(s),e.d(s,{default:function(){return q}});var o=e(6252),a=e(3577);const i={class:"container | py-20"},c=(0,o._)("h2",{class:"text-center"},"來選好食",-1),l=(0,o._)("hr",{class:"my-6"},null,-1),n={class:"row"},d=["onClick"],r={class:"text-blue1"},g={class:"row"},u={class:"card rounded-4 overflow-hidden shadow w-100"},h={class:"ratio ratio-4x3"},p=["src"],b={class:"card-body"},_={class:"fz-6 fz-md-5 fz-lg-6 mb-2"},w={class:"d-flex align-items-center justify-content-between | mb-4"},m={class:"fw-bold"},y=(0,o.Uk)(" 好食價 "),v=(0,o.Uk)(" 元 "),f={class:"fz-4 text-muted"},k={class:"d-flex justify-content-between"},C=(0,o._)("button",{type:"button",class:"btn btn-outline-gray d-flex align-items-center"},[(0,o._)("i",{class:"bi bi-eye-fill me-1"}),(0,o._)("span",{class:"d-block d-sm-none d-lg-block"}," 看更多 "),(0,o._)("span",{class:"d-none d-sm-block d-lg-none"}," 詳細 ")],-1),x=["onClick","disabled"],z={key:0,class:"spinner-border text-warning",role:"status"},$=(0,o._)("span",{class:"visually-hidden"},"Loading...",-1),D=[$],j={key:1,class:"d-flex"},I=(0,o._)("i",{class:"bi bi-cart3 me-1"},null,-1),U=(0,o._)("span",{class:"d-block d-sm-none d-lg-block"}," 加入購物車 ",-1),L=(0,o._)("span",{class:"d-none d-sm-block d-lg-none"}," 購物車 ",-1),H=[I,U,L];function K(t,s,e,$,I,U){const L=(0,o.up)("sapn"),K=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("section",i,[c,l,(0,o._)("div",n,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(I.categories),((t,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s,class:"col-4 col-sm-3 col-lg-2"},[(0,o._)("button",{type:"button",class:(0,a.C_)(["btn btn-outline-blue2 fw-bold text-blue1 w-100 py-2 mb-4",{active:t===I.showCategory}]),onClick:s=>U.filterCategory(t)},[(0,o.Uk)((0,a.zw)(t)+" ",1),(0,o._)("span",r,(0,a.zw)(I.categories[t]?`（${I.categories[t]}）`:""),1)],10,d)])))),128))]),(0,o._)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(I.products,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.id,class:(0,a.C_)([{"d-none":t.category!==I.showCategory&&"全部商品"!==I.showCategory},"col-12 col-sm-6 col-md-4 col-lg-3 | mb-6"])},[(0,o._)("div",u,[(0,o._)("div",h,[(0,o._)("img",{src:t.imageUrl,class:"w-100 h-100 img-cover",alt:""},null,8,p)]),(0,o._)("div",b,[(0,o._)("h4",_,(0,a.zw)(t.title),1),(0,o._)("div",w,[(0,o._)("p",m,[y,(0,o.Wm)(L,{class:"fz-5 text-danger"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(t.price),1)])),_:2},1024),v]),(0,o._)("p",f,[(0,o._)("s",null,"原價 "+(0,a.zw)(t.origin_price)+" 元",1)])]),(0,o._)("div",k,[(0,o.Wm)(K,{to:`/product/${t.id}`},{default:(0,o.w5)((()=>[C])),_:2},1032,["to"]),(0,o._)("button",{onClick:s=>U.addCart(t.id),disabled:t.id===I.is_loadingItem,type:"button",class:"btn btn-dark d-flex align-items-center"},[t.id===I.is_loadingItem?((0,o.wg)(),(0,o.iD)("div",z,D)):((0,o.wg)(),(0,o.iD)("div",j,H))],8,x)])])])],2)))),128))])])}var P={data(){return{products:[],categories:{"全部商品":""},showCategory:"全部商品",is_loadingItem:"",carts:[],isLoading:!1}},methods:{getProducts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/products/all").then((t=>{this.products=t.data.products,this.products.forEach((t=>{this.categories[t.category]?this.categories[t.category]+=1:this.categories[t.category]=1}))})).catch((t=>{console.log(t.response)}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((t=>{this.carts=t.data.data})).catch((t=>{console.log(t.response)}))},addCart(t,s=1){const e={product_id:t,qty:s};this.is_loadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart",{data:e}).then((t=>{console.log(t.data);const s=t.data.data.product.title,e=t.data.message;this.$swal.fire({icon:"success",title:"成功！",text:`${s} ${e}`}),this.getCart(),this.is_loadingItem=""})).catch((t=>{console.log(t.response)}))},filterCategory(t){this.showCategory=t},showLoading(){const t=this.$loading.show();setTimeout((()=>{t.hide()}),500)}},mounted(){this.showLoading(),this.getProducts(),this.getCart()}},W=e(3744);const Y=(0,W.Z)(P,[["render",K]]);var q=Y}}]);
//# sourceMappingURL=475.5c117b62.js.map